#!/bin/bash

clear

declare -A profiles

profiles=(
  ["üè†Ô∏è Thom Bruce"]="--profile-directory=\"Default\""
  ["üíº Work: One"]="--profile-directory=\"Profile 1\""
  ["üïµÔ∏è‚Äç‚ôÇÔ∏è Private"]="--incognito"
)

PROFILE=$(gum choose "${!profiles[@]}")

[[ $PROFILE == "" ]] && exit 1

# NOTE: At present, this only works without printing
# an error to the menu's terminal window (which then persists
# after the application is open) IF a browser window is already
# open. The Hyprland execution opens without issue... It's exec
# function is DEFINITELY do something different (we knew this; eval
# is a hacky solution meant to avoid an if/else).
# eval "helium-browser ${profiles[$PROFILE]}"

# NOTE: This works instead.
# TODO: This isn't agnostic. I am trying to investigate the Hyprland
# source code to see how their 'exec' function behaves differently
# to anything I've tried. Must search deeper, but the code is C++
# and I am not super familiar. The function we're interested in
# appears to be called `handleExec`.
hyprctl dispatch exec "helium-browser ${profiles[$PROFILE]}"
